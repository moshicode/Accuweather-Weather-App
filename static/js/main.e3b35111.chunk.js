(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,a){e.exports=a(71)},46:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),u=(a(46),a(15)),i=a(1),s=function(e,t){return{type:"ADD_FAVORITE",payload:{id:e,name:t}}},l=function(e){return{type:"REMOVE_FAVORITE",payload:e}},f=function(){var e=Object(i.c)(function(e){return e.favoritesData}),t=Object(i.c)(function(e){return e.isMetric}),a=Object(i.b)();return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("nav",{className:"header__navbar"},r.a.createElement("h1",{className:"header__logo"},r.a.createElement(u.b,{to:"/"},"Weather App")),r.a.createElement("ul",{className:"header__list"},r.a.createElement("li",null,r.a.createElement(u.b,{to:"/favorites"},r.a.createElement("i",{className:"header__favorite-icon fas fa-heart"},r.a.createElement("div",{className:"header__favorite-num"},e.length)))),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){return a({type:"SET_DARK_MODE"})}},r.a.createElement("i",{className:"fas fa-adjust"}))),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){return a({type:"CONVERT_TEMPERATURE_UNITS"})}},r.a.createElement("div",{className:"header__unit-icon"},t?"\xb0C":"\xb0F")))))))},m=a(2),p=a.n(m),E=a(4),d=a(12),h=a.n(d),v="gQ307OUWQ0rbqOqwiGr85Z3JDQBtEEII",_="https://dataservice.accuweather.com",y=function(e,t){return function(){var a=Object(E.a)(p.a.mark(function a(n,r){var c;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.get("".concat(_,"/locations/v1/cities/geoposition/search?q=").concat(e,",").concat(t,"&apikey=").concat(v));case 2:return c=a.sent,a.next=5,n({type:"SET_LOCATION",payload:{cityName:c.data.ParentCity.LocalizedName,key:c.data.ParentCity.Key}});case 5:return a.next=7,n(b(r().location.key));case 7:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(E.a)(p.a.mark(function t(a){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get("".concat(_,"/locations/v1/cities/autocomplete?q=").concat(e,"&apikey=").concat(v));case 2:return n=t.sent,t.next=5,a({type:"SET_LOCATION",payload:{cityName:n.data[0].LocalizedName,key:n.data[0].Key}});case 5:return t.next=7,a(b(n.data[0].Key));case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(E.a)(p.a.mark(function t(a){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(N(e));case 2:return t.next=4,a(T(e));case 4:return t.next=6,a({type:"TOGGLE_LOADING"});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(E.a)(p.a.mark(function t(a){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get("".concat(_,"/currentconditions/v1/").concat(e,"?apikey=").concat(v,"&getphotos=true"));case 2:return n=t.sent,t.next=5,a({type:"GET_CURRENT_WEATHER",payload:n.data[0]});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(E.a)(p.a.mark(function t(a){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get("".concat(_,"/forecasts/v1/daily/5day/").concat(e,"?apikey=").concat(v,"&metric=true"));case 2:return n=t.sent,t.next=5,a({type:"GET_DAILY_FORECASTS",payload:n.data.DailyForecasts});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},g=a(14),w=a(37),x=a.n(w),S=function(e,t){return void 0===t?"".concat((9*e/5+32).toFixed(2),"\xb0F"):"".concat((9*e/5+32).toFixed(2),"\xb0F - ").concat((9*t/5+32).toFixed(2),"\xb0F ")};var k=function(){var e=Object(i.c)(function(e){return e.weather.forecasts}),t=Object(i.c)(function(e){return e.weather.current}),a=Object(i.c)(function(e){return e.location}),n=Object(i.c)(function(e){return e.favoritesData}),c=Object(i.c)(function(e){return e.isMetric}),o=Object(i.b)(),u=t.IsDayTime?"Day":"Night";return r.a.createElement("div",{className:"weather-forecast container"},r.a.createElement("div",{className:"weather-current__today"},r.a.createElement("h2",{className:"weather-current__title"},a.cityName),r.a.createElement("div",{className:"weather-forecast__current"},r.a.createElement("p",{className:"weather-forecast__day"},"Today"),r.a.createElement("p",{className:"weather-forecast__text"},t.WeatherText),r.a.createElement("p",{className:"weather-forecast__temp"},c?"".concat(t.Temperature.Metric.Value,"\xb0C"):S(t.Temperature.Metric.Value))),n.some(function(e){return e.id===a.key})?r.a.createElement("button",{className:"weather-current__btn",onClick:function(){return o(l(a.key,a.cityName))}},"Unfollow"):r.a.createElement("button",{className:"weather-current__btn",onClick:function(){return o(s(a.key,a.cityName))}},"Follow")),r.a.createElement("div",{className:"weather-forecast__list"},e.map(function(e,t){return r.a.createElement("div",{key:t,className:"weather-forecast__item"},r.a.createElement("p",{className:"weather-forecast__day"},x()(e.Date).format("ddd")),r.a.createElement("p",{className:"weather-forecast__icon"},r.a.createElement("i",{className:"wi icon-accu".concat(e[u].Icon)})),r.a.createElement("p",{className:"weather-forecast__temp"},c?"".concat(e.Temperature.Minimum.Value,"\xb0C - ").concat(e.Temperature.Maximum.Value,"\xb0C"):S(e.Temperature.Minimum.Value,e.Temperature.Maximum.Value)),r.a.createElement("p",{className:"weather__forecast__text"},e[u].IconPhrase))})))},j=function(e){return function(){var t=Object(E.a)(p.a.mark(function t(a){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=8;break}return t.next=3,a({type:"GET_SUGGESTIONS_REQ"});case 3:return t.next=5,h.a.get("".concat("https://dataservice.accuweather.com","/locations/v1/cities/autocomplete?q=").concat(e,"&apikey=").concat("gQ307OUWQ0rbqOqwiGr85Z3JDQBtEEII"));case 5:return n=t.sent,t.next=8,a({type:"GET_SUGGESTIONS_RES",payload:n.data.map(function(e){return{cityName:e.LocalizedName,key:e.Key,country:e.Country.LocalizedName}})});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},I=function(){var e=Object(i.c)(function(e){return e.suggestions}),t=Object(i.b)(),a=function(){var e=Object(E.a)(p.a.mark(function e(a){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.target.value,t({type:"SET_TEXT",payload:n}),!(n.length>0)){e.next=7;break}return e.next=5,t(j(n));case 5:e.next=8;break;case 7:t({type:"RESET_SUGGESTIONS"});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n=function(){var a=Object(E.a)(p.a.mark(function a(n){return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.text.length>0&&0===e.isFetching&&e.locations.length>0)){a.next=4;break}return a.next=3,t(O(e.locations[0].cityName));case 3:t({type:"RESET_SUGGESTIONS"});case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),c=function(){var e=Object(E.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==t.charCode&&"Enter"!==t.key){e.next=4;break}return t.preventDefault(),e.next=4,n();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(E.a)(p.a.mark(function e(a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"RESET_SUGGESTIONS"}),e.next=3,t({type:"SET_LOCATION",payload:a});case 3:return e.next=5,t(b(a.key));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"hero__search search"},r.a.createElement("input",{className:"search__input",type:"text",placeholder:"Search By City...",onChange:a,value:e.text,onKeyPress:c}),e.locations.length>0&&e.text.length>0?r.a.createElement("button",{className:"search__btn",onClick:function(){return t({type:"RESET_SUGGESTIONS"})}},r.a.createElement("i",{className:"fas fa-times"})):r.a.createElement("button",{className:"search__btn",onClick:n},r.a.createElement("i",{className:"fas fa-search"})),0===e.locations.length||0===e.text.length?null:r.a.createElement("ul",{className:"search__results results"},e.locations.map(function(e,t){return r.a.createElement("li",{key:t,onClick:Object(E.a)(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))},r.a.createElement("span",null,e.cityName),r.a.createElement("span",{className:"search__label"},e.country))})))},G=function(){var e=Object(i.c)(function(e){return e.weather.current}),t=Object(i.c)(function(e){return e.isDark}),a="linear-gradient(rgba(245, 177, 83, 0.75), ".concat(t?"#000718":"#fff","), url(").concat(e.Photos[0].LandscapeLink.replace("_L_L","_L_XXL"),")");return r.a.createElement("div",{className:"hero",style:{backgroundImage:a}},r.a.createElement(I,null))},R=function(){return Object(i.c)(function(e){return e.isLoading})?r.a.createElement("div",{className:"loading-wrapper"},r.a.createElement("div",{className:"cloudy"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(G,null),r.a.createElement(k,null))},C=a(25),D=a(38);var A=function(){var e=Object(i.c)(function(e){return e.favoritesData}),t=Object(i.c)(function(e){return e.isMetric}),a=Object(i.b)(),c=Object(n.useState)([]),o=Object(C.a)(c,2),u=o[0],s=o[1],f=Object(n.useState)(!0),m=Object(C.a)(f,2),d=m[0],v=m[1];Object(n.useEffect)(function(){_()},[]);var _=function(){var t=Object(E.a)(p.a.mark(function t(){var a,n,r,c,o,u,i,l,f;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:v(!0),a={},n=!0,r=!1,t.prev=4,o=Object(D.a)(e);case 6:return t.next=8,o.next();case 8:return u=t.sent,n=u.done,t.next=12,u.value;case 12:if(i=t.sent,n){t.next=22;break}return l=i,t.next=17,h.a.get("https://dataservice.accuweather.com/currentconditions/v1/".concat(l.id,"?apikey=gQ307OUWQ0rbqOqwiGr85Z3JDQBtEEII&getphotos=true"));case 17:f=t.sent,a[l.id]=f.data[0];case 19:n=!0,t.next=6;break;case 22:t.next=28;break;case 24:t.prev=24,t.t0=t.catch(4),r=!0,c=t.t0;case 28:if(t.prev=28,t.prev=29,n||null==o.return){t.next=33;break}return t.next=33,o.return();case 33:if(t.prev=33,!r){t.next=36;break}throw c;case 36:return t.finish(33);case 37:return t.finish(28);case 38:return s(a),t.next=41,v(!1);case 41:case"end":return t.stop()}},t,null,[[4,24,28,38],[29,,33,37]])}));return function(){return t.apply(this,arguments)}}();return d?r.a.createElement("div",{className:"favorites container"},"loading..."):r.a.createElement("div",{className:"favorites container"},e.map(function(e,n){return r.a.createElement("div",{className:"favorites__item",key:n},r.a.createElement("p",null,e.name),r.a.createElement("p",null,u[e.id].WeatherText),r.a.createElement("p",null,t?"".concat(u[e.id].Temperature.Metric.Value,"\xb0C"):S(u[e.id].Temperature.Metric.Value)),r.a.createElement("button",{onClick:function(){return a(l(e.id))}},"Remove Favorite"))}))};var F=function(){return r.a.createElement(g.c,null,r.a.createElement(g.a,{path:"/",exact:!0,component:R}),r.a.createElement(g.a,{path:"/favorites",component:A}))};var L=function(){var e=Object(i.b)(),t=Object(i.c)(function(e){return e.isDark});return Object(n.useEffect)(function(){navigator.geolocation.getCurrentPosition(function(t){return e(y(t.coords.latitude,t.coords.longitude))},function(t){console.log(t.message),e(O("Jerusalem"))})},[e]),r.a.createElement("div",{className:t?"app dark":"app"},r.a.createElement(f,null),r.a.createElement(F,null))},U=a(39),M=a(13),V=a(10),Q=a(40),P=function(){try{var e=localStorage.getItem("favorites");return null===e?[]:JSON.parse(e)}catch(t){return}}(),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FAVORITE":return[].concat(Object(Q.a)(e),[t.payload]);case"REMOVE_FAVORITE":return e.filter(function(e){return e.id!==t.payload});case"UPDATE_FAVORITE":return e.map(function(e){return Object(V.a)({},e,{currentWeather:t.payload})});default:return e}},W=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"CONVERT_TEMPERATURE_UNITS":return!e;default:return e}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"SET_DARK_MODE":return!e;default:return e}},K=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"TOGGLE_LOADING":return!1;default:return e}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CURRENT_WEATHER":return Object(V.a)({},e,{current:t.payload});case"GET_DAILY_FORECASTS":return Object(V.a)({},e,{forecasts:t.payload});default:return e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOCATION":return t.payload;default:return e}},z={isFetching:0,text:"",locations:[]},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SUGGESTIONS_REQ":return Object(V.a)({},e,{isFetching:e.isFetching+1});case"GET_SUGGESTIONS_RES":return Object(V.a)({},e,{isFetching:e.isFetching-1,locations:t.payload});case"RESET_SUGGESTIONS":return Object(V.a)({},e,{text:"",locations:[]});case"SET_TEXT":return Object(V.a)({},e,{text:t.payload});default:return e}},H=Object(M.c)({favoritesData:q,isMetric:W,isDark:J,isLoading:K,weather:X,location:B,suggestions:Z}),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||M.d,$=Object(M.e)(H,Y(Object(M.a)(U.a)));$.subscribe(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("favorites",t)}catch(a){}}($.getState().favoritesData)}),o.a.render(r.a.createElement(i.a,{store:$},r.a.createElement(u.a,null,r.a.createElement(L,null))),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.e3b35111.chunk.js.map